var validator=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(5),a=r(3),i=r(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fieldRule=null,e.compareRule=null,e.data={},e}return n(e,t),e.field=function(t){return(new e).field(t)},e.output=function(t,r){return r&&0!=t?{ret:t,result:{dataName:r.dataName,value:r.value,ruleName:r.ruleName,errMsg:r.errMsg}}:{ret:e.SUCCESS}},e.compare=function(t){return(new e).compare(t)},e.prototype.field=function(t){return this.checkFieldRule(t),this.fieldRule=t,this},e.prototype.compare=function(t){return this.checkCompareRule(t),this.compareRule=t,this},e.prototype.verify=function(t){var r=this;return new Promise(function(n,i){if(r.data=t,null!=r.fieldRule){var u=new o.Field(t);for(var s in r.fieldRule){var f=u.verify(s,r.fieldRule[s]);f.ret!=e.SUCCESS&&i(f)}}if(null!=r.compareRule){var p=new a.Compare(t);for(var s in r.compareRule){var f=p.verify(r.compareRule[s]);f.ret!=e.SUCCESS&&i(f)}}n({ret:e.SUCCESS})})},e.prototype.verifySync=function(t){if(this.data=t,null!=this.fieldRule){var r=new o.Field(t);for(var n in this.fieldRule){var i=r.verify(n,this.fieldRule[n]);if(i.ret!=e.SUCCESS)return i}}if(null!=this.compareRule){var u=new a.Compare(t);for(var n in this.compareRule){var i=u.verify(this.compareRule[n]);if(i.ret!=e.SUCCESS)return i}}return{ret:e.SUCCESS}},e.prototype.verifyAll=function(t){this.data=t;var r=[],n=!0;if(null!=this.fieldRule){var i=new o.Field(t);for(var u in this.fieldRule){var s=i.verify(u,this.fieldRule[u]);r.push(s),s.ret!=e.SUCCESS&&(n=!1)}}if(null!=this.compareRule){var f=new a.Compare(t);for(var u in this.compareRule){var s=f.verify(this.compareRule[u]);r.push(s),s.ret!=e.SUCCESS&&(n=!1)}}return n?{ret:0}:r},e.prototype.checkFieldRule=function(t){for(var e in t){if(!t[e].hasOwnProperty("type")&&!t[e].hasOwnProperty("length"))throw Error("type和length规则至少配置一个");this.checkMessage(t[e])}},e.prototype.checkCompareRule=function(t){var e=this;t.forEach(function(t){e.checkMessage(t)})},e.prototype.checkMessage=function(t){if(!t.hasOwnProperty("message"))throw Error("未配置全局message")},e.types=i.type,e.SUCCESS=0,e.errCode={ERR_NOT_EXIST:-1001,ERR_TYPEERR:-1002,ERR_LENGTHERR:-1003,ERR_COMPAREERR:-1004},e}(i.type);e.Validator=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.TYPE="type",t.LENGTH="length",t.OPTIONAL="optional"}(e.IRuleName||(e.IRuleName={}));!function(t){t.TYPE1=">",t.TYPE2="<",t.TYPE3=">=",t.TYPE4="<=",t.TYPE5="=",t.TYPE6="~"}(e.ISymbol||(e.ISymbol={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.qq=function(t){var e=!1;if("string"==typeof t||"number"==typeof t){var r=Number(t);e=/^\d{5,10}$/.test(String(t))&&r>=10001&&r<=4294967295}return e},t.zh=function(t){return/^[\u4e00-\u9fa5]+$/.test(t)},t.en=function(t){return/^[a-zA-Z]+$/.test(t)},t.number=function(t){var e=Number(t);return("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))&&/^[\d]+$/.test(t)},t.positive=function(t){var e=Number(t);return!!e&&(/^[1-9]\d*$/.test(String(e))||/^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$/.test(String(e)))},t.negative=function(t){return/^-[1-9]\d*$/.test(t)||/^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$/.test(t)},t.int=function(t){var e=Number(t);return!!e&&("number"==typeof e&&e%1==0)},t.numeric=function(t){return/^[-+]?[0-9\.]+$/.test(t)},t.email=function(t){return/^\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/.test(t)},t.lowercase=function(t){return t===t.toLowerCase()},t.uppercase=function(t){return t===t.toUpperCase()},t.url=function(t){return!!new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$").test(t)},t.json=function(t){if("string"!=typeof t)return!1;try{var e=JSON.parse(t);return!!e&&"object"==typeof e}catch(t){}return!1},t.legal_input=function(t){return!/[`~!#$%^*+<>?:"{},.\/;'[\]]/im.test(t)},t.mobile=function(t){return/^(\+?0?86\-?)?1[3456789]\d{9}$/.test(t)},t.unix_timestamp=function(t){var e=Number(t),r=/^\d{10}$/;return!!e&&("number"==typeof e&&r.test(t))},t.timestamp=function(t){var e=Number(t),r=/^\d{13}$/;return!!e&&("number"==typeof e&&r.test(t))},t.host=function(t){return/^\s*([a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?(\.[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*)([^a-z0-9-]|$)\s*/.test(t)},t.ip=function(e){return t.Ipv4(e)||t.Ipv6(e)},t.Ipv4=function(t){return/^\s*((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))\s*$/.test(t)},t.Ipv6=function(t){return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(t)},t.base64=function(t){var e=/[^A-Z0-9+\/=]/i,r=t.length;if(!r||r%4!=0||e.test(t))return!1;var n=t.indexOf("=");return-1===n||n===r-1||n===r-2&&"="===t[r-1]},t.and=function(t){return{rule:t,sign:"and"}},t.or=function(t){return{rule:t,sign:"or"}},t.not=function(t){return{rule:t,sign:"not"}},t.extend=function(t,e){return(new o).add(t,e)},t.datetime=function(t,e){return e?a.isValid(t,e):{rule:t,sign:"datetime"}},t.QQ=t.qq,t.ZH=t.zh,t.EN=t.en,t.NUMBER=t.number,t.POSITIVE=t.positive,t.NEGATIVE=t.negative,t.INT=t.int,t.NUMERIC=t.numeric,t.EMAIL=t.email,t.LOWERCASE=t.lowercase,t.UPPERCASE=t.uppercase,t.URL=t.url,t.JSON=t.json,t.LEGAL_INPUT=t.legal_input,t.MOBILEPHONE_ZHCN=t.mobile,t.UNIXTIMESTAMP=t.unix_timestamp,t.TIMESTAMP=t.timestamp,t.HOST=t.host,t.IP=t.ip,t.IPv4=t.Ipv4,t.IPv6=t.Ipv6,t.BASE64=t.base64,t}();e.type=n;var o=function(){function t(){this.types={}}return t.prototype.toFunc=function(t){return function(e){return t.test(e)}},t.prototype.isConflict=function(t){var e=this,r=!1;return Object.keys(n).forEach(function(n){n!==t&&n!==e.toUpperCase(t)||(r=!0),"and"===t&&(r=!0)}),r},t.prototype.toUpperCase=function(t){return t.toUpperCase()},t.prototype.add=function(t,e){var r=!1;if(!e||"function"!=typeof e&&!(e instanceof RegExp))return null;if(!this.isConflict(t)){var n=e;"function"!=typeof e&&(n=this.toFunc(e)),"function"==typeof n&&(this.types[t]=n),r=!0}return r?this:null},t.prototype.extend=function(t,e){return this.add(t,e)},t}();e.ExtendTypes=o;var a=function(){function t(){}return t.isValid=function(e,r){return(new t).isValid(e,r)},t.prototype.isValid=function(t,e){var r=e.split(/[- :,.\/\\_|]/),n=t.split(/[- :,.\/\\_|]/);if(!this.isNumber(r)||!this.vFormate(r,n))return!1;var o=this.parseDate(r,n);return this.validate(o)},t.prototype.validate=function(t){var e=!0;return t.forEach(function(t){t||(e=!1)}),e},t.prototype.parseDate=function(t,e){var r=this,n=[],o=this.toInt(t);return e.forEach(function(t,e){switch(t){case"MM":n.push(r.validateMM(o[e]));break;case"DD":n.push(r.validateDD(o[e-2],o[e-1],o[e]));break;case"hh":n.push(r.validateHh(o[e],"hh"));break;case"mm":case"ss":n.push(r.validateMS(o[e]))}}),n},t.prototype.vFormate=function(t,e){var r=!0;return t.length!=e.length&&(r=!1),t.forEach(function(t,n){t.length!=e[n].length&&(r=!1)}),r},t.prototype.isNumber=function(t){var e=!0;return t.forEach(function(t){n.number(t)||(e=!1)}),e},t.prototype.validateMM=function(t){return 1<=t&&t<=12},t.prototype.validateDD=function(t,e,r){var n=!0;return r<1?n=!1:(1==e||3==e||5==e||7==e||8==e||10==e||12==e)&&r>31?n=!1:(4==e||6==e||9==e||11==e)&&r>30?n=!1:2==e&&(this.isLeapYear(t)&&r>29||!this.isLeapYear(t)&&r>28)&&(n=!1),n},t.prototype.validateHh=function(t,e){var r=!0;return t>23&&(r=!1),r},t.prototype.validateMS=function(t){return t<=59},t.prototype.isLeapYear=function(t){return t%4==0&&(t%100!=0||t%400==0)},t.prototype.toInt=function(t){var e=[];return t.forEach(function(t){e.push(Number(t))}),e},t}();e.Datetime=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),a=function(){function t(t){this.data=t}return t.prototype.verify=function(t){var e=t.rule,r=this.getType(e);if(!r)throw Error("compare规则配置有误");var n=e.split(r.symbol),a=this.getArr(n),i={dataName:[n[0],n[1]],value:a,ruleName:e,errMsg:t.message},u=this.compare(r.type,a)?o.Validator.SUCCESS:o.Validator.errCode.ERR_COMPAREERR;return o.Validator.output(u,i)},t.prototype.getArr=function(t){var e=this,r=[];return t.forEach(function(n,o){var a=Number(n);a?r.push(a):r.push(e.data[t[o]])}),r},t.prototype.compare=function(t,e){var r=!0;switch(t){case 1:r=e[0]>e[1];break;case 2:r=e[0]<e[1];break;case 3:r=e[0]>=e[1];break;case 4:r=e[0]<=e[1];break;case 5:r=e[0]==e[1]}return r},t.prototype.getType=function(t){var e;return[{type:1,reg:/^(\w*)>(\w+)$/,symbol:n.ISymbol.TYPE1},{type:2,reg:/^(\w*)<(\w+)$/,symbol:n.ISymbol.TYPE2},{type:3,reg:/^(\w*)>=(\w+)$/,symbol:n.ISymbol.TYPE3},{type:4,reg:/^(\w*)<=(\w+)$/,symbol:n.ISymbol.TYPE4},{type:5,reg:/^(\w*)=(\w+)$/,symbol:n.ISymbol.TYPE5},{type:6,reg:/^(\w+)~(\w+)$/,symbol:n.ISymbol.TYPE6}].forEach(function(r){r.reg.test(t)&&(e=r)}),e||null},t.prototype.getData=function(t,e){var r=t.symbol,n=t.type,o=e.split(r),a=this.toInt(o);return 6==n?a:[a[1]]},t.prototype.toInt=function(t){var e=[];return t.forEach(function(t){e.push(Number(t))}),e},t}();e.Compare=a},function(t,e,r){"use strict";var n=r(0);t.exports=n.Validator},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(2),a=r(3),i=r(0),u=function(){function t(t){this.data=t,this.compare=new a.Compare(t)}return t.prototype.verify=function(t,e){var r=this.verifyOpt(t,e);if(r.ret!=i.Validator.SUCCESS)return r;if(this.exist(t)){if(r=this.verifyType(t,e),r.ret!=i.Validator.SUCCESS)return r;r=this.verifyLength(t,e)}return r},t.prototype.verifyType=function(t,e){var r,o=e.type;if(!o)return i.Validator.output(i.Validator.SUCCESS);"object"!=typeof o&&(o={rule:[o],message:e.message}),o.message||(o.message=e.message),"object"!=typeof o.rule&&(o.rule=[o.rule]),r=Array.isArray(o.rule)?this._verifyTypesArr(t,{rule:o.rule,sign:o.sign}):this._verifyTypesArr(t,o.rule);var a={dataName:t,value:String(this.data[t]),ruleName:n.IRuleName.TYPE,errMsg:o.message};return i.Validator.output(r,a)},t.prototype.verifyLength=function(t,e){var r=e.length;if(!r)return i.Validator.output(i.Validator.SUCCESS);"string"==typeof r&&(r={rule:r,message:e.message});var o,a=this.compare.getType(r.rule),u=this.compare.getData(a,r.rule),s=!1;if(1==u.length)u.unshift(this.data[t].length),s=this.compare.compare(a.type,u);else{var f=[u[0],this.data[t].length],p=[this.data[t].length,u[1]];s=this.compare.compare(2,f)&&this.compare.compare(2,p)}var c={dataName:t,value:String(this.data[t]),ruleName:n.IRuleName.LENGTH,errMsg:r.message};return o=s?i.Validator.SUCCESS:i.Validator.errCode.ERR_LENGTHERR,i.Validator.output(o,c)},t.prototype._verifyTypesArr=function(t,e){var r,n=e.sign;return r=n&&"or"===n?this._verifyOr(t,e.rule):n&&"not"===n?this._verifyNot(t,e.rule):n&&"datetime"===n?this._verifyDate(t,e.rule):this._verifyAnd(t,e.rule),r?i.Validator.SUCCESS:i.Validator.errCode.ERR_TYPEERR},t.prototype._verifyAnd=function(t,e){var r=this,n=!0;return e.forEach(function(e){r._verifyType(r.data[t],e)||(n=!1)}),n},t.prototype._verifyOr=function(t,e){var r=this,n=!1;return e.forEach(function(e){r._verifyType(r.data[t],e)&&(n=!0)}),n},t.prototype._verifyDate=function(t,e){return o.Datetime.isValid(e[0],this.data[t])},t.prototype._verifyNot=function(t,e){var r=this,n=!0;return e.forEach(function(e){r._verifyType(r.data[t],e)&&(n=!1)}),n},t.prototype._verifyType=function(t,e){return e(t)},t.prototype.verifyOpt=function(t,e){var r,o=e.optional||!1;"boolean"==typeof o&&(o={rule:o,message:e.message});var a={dataName:t,value:null,ruleName:n.IRuleName.OPTIONAL,errMsg:o.message};return r=o.rule||this.exist(t)?i.Validator.SUCCESS:i.Validator.errCode.ERR_NOT_EXIST,i.Validator.output(r,a)},t.prototype.exist=function(t){var e=this.data;return!(null==e||!e.hasOwnProperty(t))},t}();e.Field=u}]);